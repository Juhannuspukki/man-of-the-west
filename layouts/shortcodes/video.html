{{ $videoSrc := .Get "src" }}

<div class="row">
  {{ $url := printf "%s/%s" site.Params.staticurl $videoSrc }}

  {{ if eq hugo.Environment "development" }}
    <a href="/images/{{ $videoSrc }}" class="no-underline">
      <figure>
        <video autoplay loop muted playsinline src="/images/{{ $videoSrc }}" class="full-width"></video>
        {{ with .Get "caption" }}<figcaption>{{.}}</figcaption>{{ end }}
      </figure>
    </a>
  {{ else }}
    <a href="{{ $url }}" class="no-underline">
      <figure>
        <video autoplay loop muted playsinline src="{{ $url }}" class="full-width"></video>
        {{ with .Get "caption" }}<figcaption>{{.}}</figcaption>{{ end }}
      </figure>
    </a>
  {{ end }}
</div>